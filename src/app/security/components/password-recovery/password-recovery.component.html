<div class="container-PR">
    <app-circles></app-circles>
    <div class="stepper-password-recovery">
        <mat-stepper linear #stepper>
            <!-- Step 1 -->
            <mat-step [stepControl]="firstFormGroup">
                <form [formGroup]="firstFormGroup">
                    <ng-template matStepLabel>Your Email</ng-template>
                    <mat-form-field>
                        <mat-label>Email</mat-label>
                        <input type="email" matInput formControlName="firstCtrl" placeholder="Enter your email"
                            required>
                        <mat-error *ngIf="firstFormGroup.get('firstCtrl')?.hasError('required')">
                            Email is required
                        </mat-error>
                        <mat-error *ngIf="firstFormGroup.get('firstCtrl')?.hasError('email')">
                            Please enter a valid email address
                        </mat-error>
                    </mat-form-field>
                    <div>
                        <button mat-raised-button color="primary" matStepperNext>Next</button>
                    </div>
                </form>
            </mat-step>

            <!-- Step 2 -->
            <mat-step [stepControl]="secondFormGroup">
                <form [formGroup]="secondFormGroup">
                    <ng-template matStepLabel>Change Password</ng-template>

                    <!-- Email input -->
                    <mat-form-field>
                        <mat-label>Email</mat-label>
                        <input type="email" matInput formControlName="secondCtrl" readonly>
                    </mat-form-field>

                    <!-- Verification Code input -->
                    <mat-form-field>
                        <mat-label>Code</mat-label>
                        <input type="number" matInput formControlName="verificationCode" placeholder="Verify Code"
                            required>
                    </mat-form-field>

                    <!-- New Password input -->
                    <mat-form-field>
                        <mat-label>New Password</mat-label>
                        <input [type]="hideNewPassword ? 'password' : 'text'" matInput formControlName="newPassword"
                            placeholder="New Password" required>
                        <button mat-icon-button matSuffix (click)="toggleNewPasswordVisibility()">
                            <mat-icon>{{hideNewPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                        </button>
                        <mat-error *ngIf="secondFormGroup.get('newPassword')?.hasError('required')">
                            New password is required
                        </mat-error>
                    </mat-form-field>

                    <!-- Confirm Password input -->
                    <mat-form-field>
                        <mat-label>Confirm Password</mat-label>
                        <input [type]="hideNewConfirmPassword ? 'password' : 'text'" matInput
                            formControlName="newConfirmPassword" placeholder="Confirm Password" required>
                        <button mat-icon-button matSuffix (click)="toggleNewConfirmPasswordVisibility()">
                            <mat-icon>{{hideNewConfirmPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                        </button>
                        <mat-error *ngIf="secondFormGroup.get('newConfirmPassword')?.hasError('required')">
                            Confirm password is required
                        </mat-error>
                        <mat-error *ngIf="secondFormGroup.errors?.['PasswordNoMatch']">
                            Passwords do not match
                        </mat-error>
                    </mat-form-field>

                    <div class="container-buttons">
                        <button mat-raised-button color="accent" matStepperPrevious>Back</button>
                        <button mat-raised-button color="primary" matStepperNext [disabled]="secondFormGroup.invalid">Next</button>
                    </div>
                </form>
            </mat-step>
        </mat-stepper>
    </div>
</div>